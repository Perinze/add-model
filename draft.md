## 简介

现在有一种数字系统，
由多个proc和一个内存构成。
每个proc包含一个状态机，
而proc之间存在io操作。
此外，每个proc都可以对内存进行读写，
这个内存的一个主要用处就是跨proc通信。

这个基于内存的跨proc通信干了两件事：

1. 发送方写入内存
2. 发送方将地址通过io传递给接收方
3. 接收方读取内存

然而我们发现内存瓶颈会成为整个系统的瓶颈：
假如内存在一个周期只能允许一个proc访问，
那么同一个周期，两个proc同时发出了内存访问，
只会有一个被响应，另一个进入访问队列。

现在我想利用形式化方法，
计算这个系统设计，以及改进后的系统的吞吐量。
另外我也想知道，如果proc里的状态机改成pipeline，
吞吐量能达到多少。

## 系统建模

### 系统概况

我将对包含两个proc和一个内存的简单demo建模。
这两个proc

1. 各自包含一个状态机
2. 分别控制io channel的一端
3. 能够访问任意内存

io channel介绍。

内存的模型是一个地址到数据的映射。
最低性能的内存是erw，
一次只能接收一个读或者写请求。
一个好一点的内存是1r1w，
一次可以同时接收一个读和一个写请求，
如果地址相同，那么读出的是旧数据，
然后才写入新数据。

内存改进模型是为每个proc单独划分一个区域，
只有这个proc可以对这个区域写入数据，
其他proc只能读取数据，不能写入。

### 状态机模型

当前状态
下一状态

### io channel模型

FIFO
队列长度

### 内存模型

addr -> data

改进模型就是多个内存